apply plugin: 'idea'
apply plugin: 'scala'

group 'com.james'
version '1.0-SNAPSHOT'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.scala-lang:scala-library:2.12.7'
    compile 'org.scala-lang:scala-reflect:2.12.7'
    compile 'io.gatling.highcharts:gatling-charts-highcharts:2.3.1'

    testCompile group: 'junit', name: 'junit', version: '4.12'
}

task gatlingTests(type: JavaExec) {
    description = 'Run gatling tests'

    new File("${buildDir}/reports/gatling").mkdirs()

    classpath = sourceSets.main.runtimeClasspath

    main = "io.gatling.app.Gatling"

    args = ['-s', 'simulations.SimpleSimulation',
            '-sf', 'simulations/resources',
            '-df', 'simulations/resources',
            '-rf', "${buildDir}/reports/gatling"
    ]
}